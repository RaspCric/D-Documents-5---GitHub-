<VirtualHost *:80>
	ServerAdmin webmaster@localhost
	DocumentRoot /home/mediawiki/www

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	RewriteEngine on
	RewriteCond %{HTTPS} !on
	RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
</VirtualHost>

<IfModule mod_ssl.c>
    <VirtualHost *:443>
		ServerName mediawiki.totosandbox.net
		ServerAdmin mediawiki@localhost
		DocumentRoot /home/mediawiki/www

		LogLevel warn
		ErrorLog ${APACHE_LOG_DIR}/error.log
		CustomLog ${APACHE_LOG_DIR}/access.log combined

		#SSLEngine on
		#SSLCertificateFile      /etc/letsencrypt/live/mediawiki.totosandbox.net/cert.pem
		#SSLCertificateKeyFile   /etc/letsencrypt/live/mediawiki.totosandbox.net/privkey.pem
		#SSLCertificateChainFile /etc/letsencrypt/live/mediawiki.totosandbox.net/chain.pem
		#Include /etc/letsencrypt/options-ssl-apache.conf
		#SSLProtocol All -SSLv2 -SSLv3 -TLSv1 -TLSv1.1 -TLSv1.2
		#SSLCipherSuite HIGH:!aNULL:!MD5:!ADH:!RC4:!DH:!RSA
		#SSLHonorCipherOrder on
		#SSLCompression off
		#SSLOptions +StrictRequire
		#Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"

		<FilesMatch "\.(cgi|shtml|phtml|php)$">
			SSLOptions +StdEnvVars
		</FilesMatch>

		<Directory /usr/lib/cgi-bin>
			SSLOptions +StdEnvVars
		</Directory>
						
		<Directory /home/mediawiki/www>
			Options Indexes FollowSymLinks
			AllowOverride None
			Require all granted
		</Directory>
	</VirtualHost>
</IfModule>
